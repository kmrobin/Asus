function sampleRUM(e,t){const o=()=>window.performance?window.performance.now():Date.now()-window.hlx.rum.firstReadTime;try{if(window.hlx=window.hlx||{},sampleRUM.enhance=()=>{},!window.hlx.rum){const e=new URLSearchParams(window.location.search).get("rum"),t=("high"===window.SAMPLE_PAGEVIEWS_AT_RATE?10:"low"===window.SAMPLE_PAGEVIEWS_AT_RATE&&1e3)||"on"===e&&1||100,a=Math.random().toString(36).slice(-4),n="off"!==e&&Math.random()*t<1;if(window.hlx.rum={weight:t,id:a,isSelected:n,firstReadTime:window.performance?window.performance.timeOrigin:Date.now(),sampleRUM:sampleRUM,queue:[],collector:(...e)=>window.hlx.rum.queue.push(e)},n){const e=e=>{const t={source:"undefined error"};try{t.target=e.toString(),t.source=e.stack.split("\n").filter((e=>e.match(/https?:\/\//))).shift().replace(/at ([^ ]+) \((.+)\)/,"$1@$2").replace(/ at /,"@").trim()}catch(e){}return t};window.addEventListener("error",(({error:t})=>{sampleRUM("error",e(t))})),window.addEventListener("unhandledrejection",(({reason:t})=>{let o={source:"Unhandled Rejection",target:t||"Unknown"};t instanceof Error&&(o=e(t)),sampleRUM("error",o)})),sampleRUM.baseURL=sampleRUM.baseURL||new URL(window.RUM_BASE||"/",new URL("https://rum.hlx.page")),sampleRUM.collectBaseURL=sampleRUM.collectBaseURL||sampleRUM.baseURL,sampleRUM.sendPing=(e,o,n={})=>{const c=JSON.stringify({weight:t,id:a,referer:window.location.href,checkpoint:e,t:o,...n}),r=window.RUM_PARAMS?`?${new URLSearchParams(window.RUM_PARAMS).toString()}`:"",{href:s,origin:i}=new URL(`.rum/${t}${r}`,sampleRUM.collectBaseURL),l=i===window.location.origin?new Blob([c],{type:"application/json"}):c;navigator.sendBeacon(s,l),console.debug(`ping:${e}`,n)},sampleRUM.sendPing("top",o()),sampleRUM.enhance=()=>{if(document.querySelector('script[src*="rum-enhancer"]'))return;const{enhancerVersion:e,enhancerHash:t}=sampleRUM.enhancerContext||{},o=document.createElement("script");t&&(o.integrity=t,o.setAttribute("crossorigin","anonymous")),o.src=new URL(`.rum/@adobe/helix-rum-enhancer@${e||"^2"}/src/index.js`,sampleRUM.baseURL).href,document.head.appendChild(o)},window.hlx.RUM_MANUAL_ENHANCE||sampleRUM.enhance()}}window.hlx.rum&&window.hlx.rum.isSelected&&e&&window.hlx.rum.collector(e,t,o()),document.dispatchEvent(new CustomEvent("rum",{detail:{checkpoint:e,data:t}}))}catch(e){}}function setup(){window.hlx=window.hlx||{},window.hlx.RUM_MASK_URL="full",window.hlx.RUM_MANUAL_ENHANCE=!0,window.hlx.codeBasePath="",window.hlx.lighthouse="on"===new URLSearchParams(window.location.search).get("lighthouse");const e=document.querySelector('script[src$="/scripts/scripts.js"]');if(e)try{[window.hlx.codeBasePath]=new URL(e.src).pathname.split("/scripts/scripts.js")}catch(e){console.log(e)}}function init(){setup(),sampleRUM()}function toClassName(e){return"string"==typeof e?e.toLowerCase().replace(/[^0-9a-z]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}function toCamelCase(e){return toClassName(e).replace(/-([a-z])/g,(e=>e[1].toUpperCase()))}function readBlockConfig(e){const t={};return e.querySelectorAll(":scope > div").forEach((e=>{if(e.children){const o=[...e.children];if(o[1]){const a=o[1],n=toClassName(o[0].textContent);let c="";if(a.querySelector("a")){const e=[...a.querySelectorAll("a")];c=1===e.length?e[0].href:e.map((e=>e.href))}else if(a.querySelector("img")){const e=[...a.querySelectorAll("img")];c=1===e.length?e[0].src:e.map((e=>e.src))}else if(a.querySelector("p")){const e=[...a.querySelectorAll("p")];c=1===e.length?e[0].textContent:e.map((e=>e.textContent))}else c=e.children[1].textContent;t[n]=c}}})),t}async function loadCSS(e){return new Promise(((t,o)=>{if(document.querySelector(`head > link[href="${e}"]`))t();else{const a=document.createElement("link");a.rel="stylesheet",a.href=e,a.onload=t,a.onerror=o,document.head.append(a)}}))}async function loadScript(e,t){return new Promise(((o,a)=>{if(document.querySelector(`head > script[src="${e}"]`))o();else{const n=document.createElement("script");if(n.src=e,t)for(const e in t)n.setAttribute(e,t[e]);n.onload=o,n.onerror=a,document.head.append(n)}}))}function getMetadata(e,t=document){const o=e&&e.includes(":")?"property":"name";return[...t.head.querySelectorAll(`meta[${o}="${e}"]`)].map((e=>e.content)).join(", ")||""}function createOptimizedPicture(e,t="",o=!1,a=[{media:"(min-width: 600px)",width:"2000"},{width:"750"}]){const n=new URL(e,window.location.href),c=document.createElement("picture"),{pathname:r}=n,s=r.substring(r.lastIndexOf(".")+1);return a.forEach((e=>{const t=document.createElement("source");e.media&&t.setAttribute("media",e.media),t.setAttribute("type","image/webp"),t.setAttribute("srcset",`${r}?width=${e.width}&format=webply&optimize=medium`),c.appendChild(t)})),a.forEach(((e,n)=>{if(n<a.length-1){const t=document.createElement("source");e.media&&t.setAttribute("media",e.media),t.setAttribute("srcset",`${r}?width=${e.width}&format=${s}&optimize=medium`),c.appendChild(t)}else{const a=document.createElement("img");a.setAttribute("loading",o?"eager":"lazy"),a.setAttribute("alt",t),c.appendChild(a),a.setAttribute("src",`${r}?width=${e.width}&format=${s}&optimize=medium`)}})),c}function decorateTemplateAndTheme(){const e=(e,t)=>{t.split(",").forEach((t=>{e.classList.add(toClassName(t.trim()))}))},t=getMetadata("template");t&&e(document.body,t);const o=getMetadata("theme");o&&e(document.body,o)}function wrapTextNodes(e){const t=["P","PRE","UL","OL","PICTURE","TABLE","H1","H2","H3","H4","H5","H6"],o=e=>{const t=document.createElement("p");t.append(...e.childNodes),e.append(t)};e.querySelectorAll(":scope > div > div").forEach((e=>{if(e.hasChildNodes()){!!e.firstElementChild&&t.some((t=>e.firstElementChild.tagName===t))?"PICTURE"===e.firstElementChild.tagName&&(e.children.length>1||e.textContent.trim())&&o(e):o(e)}}))}function decorateButtons(e){e.querySelectorAll("a").forEach((e=>{if(e.title=e.title||e.textContent,e.href!==e.textContent){const t=e.parentElement,o=e.parentElement.parentElement;e.querySelector("img")||(1!==t.childNodes.length||"P"!==t.tagName&&"DIV"!==t.tagName||(e.className="button",t.classList.add("button-container")),1===t.childNodes.length&&"STRONG"===t.tagName&&1===o.childNodes.length&&"P"===o.tagName&&(e.className="button primary",o.classList.add("button-container")),1===t.childNodes.length&&"EM"===t.tagName&&1===o.childNodes.length&&"P"===o.tagName&&(e.className="button secondary",o.classList.add("button-container")))}}))}function decorateIcon(e,t="",o=""){const a=Array.from(e.classList).find((e=>e.startsWith("icon-"))).substring(5),n=document.createElement("img");n.dataset.iconName=a,n.src=`${window.hlx.codeBasePath}${t}/icons/${a}.svg`,n.alt=o,n.loading="lazy",e.append(n)}function decorateIcons(e,t=""){[...e.querySelectorAll("span.icon")].forEach((e=>{decorateIcon(e,t)}))}function decorateSections(e){e.querySelectorAll(":scope > div").forEach((e=>{const t=[];let o=!1;[...e.children].forEach((e=>{if("DIV"===e.tagName||!o){const a=document.createElement("div");t.push(a),o="DIV"!==e.tagName,o&&a.classList.add("default-content-wrapper")}t[t.length-1].append(e)})),t.forEach((t=>e.append(t))),e.classList.add("section"),e.dataset.sectionStatus="initialized",e.style.display="none";const a=e.querySelector("div.section-metadata");if(a){const t=readBlockConfig(a);Object.keys(t).forEach((o=>{if("style"===o){t.style.split(",").filter((e=>e)).map((e=>toClassName(e.trim()))).forEach((t=>e.classList.add(t)))}else e.dataset[toCamelCase(o)]=t[o]})),a.parentNode.remove()}}))}async function fetchPlaceholders(e="default"){return window.placeholders=window.placeholders||{},window.placeholders[e]||(window.placeholders[e]=new Promise((t=>{const o=getMetadata("placeholders")||`${"default"===e?"":e}/placeholders.json`;fetch(o).then((e=>e.ok?e.json():{})).then((o=>{const a={};o.data.forEach((({Key:e,Value:t})=>{if(e){const o=e.split("."),n=o.pop();o.reduce(((e,t)=>(e[t]=e[t]||{},e[t])),a)[n]=t}})),window.placeholders[e]=a,t(window.placeholders[e])})).catch((()=>{window.placeholders[e]={},t(window.placeholders[e])}))}))),window.placeholders[`${e}`]}function buildBlock(e,t){const o=Array.isArray(t)?t:[[t]],a=document.createElement("div");return a.classList.add(e),o.forEach((e=>{const t=document.createElement("div");e.forEach((e=>{const o=document.createElement("div");(e.elems?e.elems:[e]).forEach((e=>{e&&("string"==typeof e?o.innerHTML+=e:o.appendChild(e))})),t.appendChild(o)})),a.appendChild(t)})),a}async function loadBlock(e){const t=e.dataset.blockStatus;if("loading"!==t&&"loaded"!==t){e.dataset.blockStatus="loading";const{blockName:t}=e.dataset;try{const o=loadCSS(`${window.hlx.codeBasePath}/blocks/${t}/${t}.css`),a=new Promise((o=>{(async()=>{try{const o=await import(`${window.hlx.codeBasePath}/blocks/${t}/${t}.js`);o.default&&await o.default(e)}catch(e){console.log(`failed to load module for ${t}`,e)}o()})()}));await Promise.all([o,a])}catch(e){console.log(`failed to load block ${t}`,e)}e.dataset.blockStatus="loaded"}return e}function decorateBlock(e){const t=e.classList[0];if(t){e.classList.add("block"),e.dataset.blockName=t,e.dataset.blockStatus="initialized",wrapTextNodes(e);e.parentElement.classList.add(`${t}-wrapper`);const o=e.closest(".section");o&&o.classList.add(`${t}-container`)}}function decorateBlocks(e){e.querySelectorAll("div.section > div > div").forEach(decorateBlock)}async function loadHeader(e){const t=buildBlock("header","");return e.append(t),decorateBlock(t),loadBlock(t)}async function loadFooter(e){const t=buildBlock("footer","");return e.append(t),decorateBlock(t),loadBlock(t)}async function waitForFirstImage(e){const t=e.querySelector("img");await new Promise((e=>{t&&!t.complete?(t.setAttribute("loading","eager"),t.addEventListener("load",e),t.addEventListener("error",e)):e()}))}async function loadSection(e,t){const o=e.dataset.sectionStatus;if(!o||"initialized"===o){e.dataset.sectionStatus="loading";const o=[...e.querySelectorAll("div.block")];for(let e=0;e<o.length;e+=1)await loadBlock(o[e]);t&&await t(e),e.dataset.sectionStatus="loaded",e.style.display=null}}async function loadSections(e){const t=[...e.querySelectorAll("div.section")];for(let e=0;e<t.length;e+=1)await loadSection(t[e]),0===e&&sampleRUM.enhance&&sampleRUM.enhance()}init();export{buildBlock,createOptimizedPicture,decorateBlock,decorateBlocks,decorateButtons,decorateIcons,decorateSections,decorateTemplateAndTheme,fetchPlaceholders,getMetadata,loadBlock,loadCSS,loadFooter,loadHeader,loadScript,loadSection,loadSections,readBlockConfig,sampleRUM,setup,toCamelCase,toClassName,waitForFirstImage,wrapTextNodes};